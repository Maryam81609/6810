\documentclass[12pt]{article}

\newcommand{\q}[1]{\subsection*{Question {#1}}}
\renewcommand{\part}[1]{\paragraph*{{#1}.}}

\newcommand{\code}[1]{\textsf{#1}}

\title{Homework Assignment 1\\
	Performance Metrics\\
	CS/ECE 6810: Computer Architecture}
	
\author{Maryam Dabaghchian-u1078006}

%\date{\today}

\begin{document}
\maketitle

\q{1} 

\part{i} According to assumption all of the applications are equally likely to be 
executed by users, i.e., they are fairly executed. So, we compute sum of the 
weighted execution times. To that end, let us consider the computer system (BASE) 
as the reference machine. Thus, the weights of applications A, B, C, and D will 
respectively be: $\frac{1}{3}, \frac{2}{5}, 1, and \frac{1}{12}$. That results in 
the sum of weighted execution time for every machine as shown in 
Table~\ref{tbl:wext}. So, machine BASE has the least execution time. 

\begin{table}[h]
\center
\begin{tabular}{|l|r|}
	\hline
	 & \textbf{Weighted Sum} \\
	\hline
	\textbf{BASE} & $(3 \times \frac{1}{3}) + (\frac{5}{2} \times \frac{2}{5}) + 
	(1 \times 1) + (12 \times \frac{1}{12}) = 4.00$  \\
	\hline
	\textbf{NEW1} & $(7 \times \frac{1}{3}) + (3 \times \frac{2}{5}) + 
	(5 \times 1) + (1 \times \frac{1}{12}) = 8.62$ \\
	\hline
	\textbf{NEW2} & $(2 \times \frac{1}{3}) + (1 \times \frac{2}{5}) + 
	(3 \times 1) + (8 \times \frac{1}{12}) = 4.73$ \\
	\hline
	\textbf{NEW3} & $(1 \times \frac{1}{3}) + (3 \times \frac{2}{5}) + 
	(2 \times 1) + (13 \times \frac{1}{12}) = 4.62$ \\
	\hline
\end{tabular}
\caption{(i) Sum of weighted execution times.}
\label{tbl:wext}
\end{table}


\part{ii} We compute the weighted sum of energy for each machine similar to 
part (i). So, the weight of applications A, B, C, and D will respectively be: 
$\frac{1}{20}, \frac{1}{40}, \frac{1}{50}, and \frac{1}{15}$. As shown in 
Table~\ref{tbl:wenrgy}, machine NEW1 has the least energy consumption.

\begin{table}[h]
\center
\begin{tabular}{|l|r|}
	\hline
	 & \textbf{Total Energy} \\
	\hline
	\textbf{BASE} & $(20 \times \frac{1}{20}) + (40 \times \frac{1}{40}) + 
	(50 \times \frac{1}{50}) + (15 \times \frac{1}{15}) = 4$  \\
	\hline
	\textbf{NEW1} & $(10 \times \frac{1}{20}) + (30 \times \frac{1}{40}) + 
	(15 \times \frac{1}{50}) + (30 \times \frac{1}{15}) = 3.55$ \\
	\hline
	\textbf{NEW2} & $(30 \times \frac{1}{20}) + (60 \times \frac{1}{40}) + 
	(20 \times \frac{1}{50}) + (20 \times \frac{1}{15}) = 4.73$ \\
	\hline
	\textbf{NEW3} & $(70 \times \frac{1}{20}) + (35 \times \frac{1}{40}) + 
	(30 \times \frac{1}{50}) + (10 \times \frac{1}{15}) = 5.64$ \\
	\hline
\end{tabular}
\caption{(ii) Total energy consumption for every machine.}
\label{tbl:wenrgy}
\end{table}


\part{iii} Power shows the energy per time unit, i.e., $Power = 
\frac{Energy}{Time}$. Table~\ref{tbl:power} shows the power required by 
each application on all machines.

\begin{table}[h]
\center
\begin{tabular}{|l|c|c|c|c|}
	\hline
	 & \textbf{A} & \textbf{B} & \textbf{C} & \textbf{D} \\
	\hline
	\textbf{BASE} & $\frac{20}{3}$ & $\frac{40}{2.5}$ & $\frac{50}{1}$ 
	& $\frac{15}{12}$ \\
	\hline
	\textbf{NEW1} & $\frac{10}{7}$ & $\frac{30}{3}$ & $\frac{15}{5}$ 
	& $\frac{30}{1}$ \\
	\hline
	\textbf{NEW2} & $\frac{30}{2}$ & $\frac{60}{1}$ & $\frac{20}{3}$ 
	& $\frac{20}{8}$ \\
	\hline
	\textbf{NEW3} & $\frac{70}{1}$ & $\frac{35}{3}$ & $\frac{30}{2}$ 
	& $\frac{10}{13}$ \\
	\hline
\end{tabular}
\caption{(iii) Power required for every application.}
\label{tbl:power}
\end{table}

Based on the power for each application, we compute the weights similar to 
part (i) and (ii). So, the weight of applications A, B, C, and D will respectively 
be: $\frac{3}{20}$, $\frac{5}{80}$, $\frac{1}{50}$, and $\frac{12}{15}$. 
Therefore, according to weighted sum of power, as shown in 
Table~\ref{tbl:wpwr}, machine BASE consumes the least power.

\begin{table}[h]
\center
\begin{tabular}{|l|r|}
	\hline
	 & \textbf{Total Power} \\
	\hline
	\textbf{BASE} & $(\frac{20}{3} \times \frac{3}{20}) + (\frac{80}{5} \times 
	\frac{5}{80}) + (\frac{50}{1} \times \frac{1}{50}) + (\frac{15}{12} \times 
	\frac{12}{15})  = 4$  \\
	\hline
	\textbf{NEW1} & $(\frac{10}{7} \times \frac{3}{20}) + (\frac{30}{3} \times 
	\frac{5}{80}) + (\frac{15}{5} \times \frac{1}{50}) + 
	(\frac{30}{1} \times \frac{12}{15}) = 24.90$ \\
	\hline
	\textbf{NEW2} & $(\frac{30}{2} \times \frac{3}{20}) + (\frac{60}{1} \times 
	\frac{5}{80}) + (\frac{20}{3} \times \frac{1}{50}) + 
	(\frac{20}{8} \times \frac{12}{15}) = 8.13$ \\
	\hline
	\textbf{NEW3} & $(\frac{70}{1} \times \frac{3}{20}) + (\frac{35}{3} \times 
	\frac{5}{80}) + (\frac{30}{2} \times \frac{1}{50}) + 
	(\frac{10}{13} \times \frac{12}{15}) = 12.14$ \\
	\hline
\end{tabular}
\caption{(iii) Total power required for every machine.}
\label{tbl:wpwr}
\end{table}

\q{2}
\part{i} 
$
CPI = \sum \limits_{i=1}^{5} (Frequency_i \times Cycles_i) = 
(0.1 \times 2) + (0.05 \times 1) + (0.05 \times 2) + (0.3 \times 1) + 
(0.5 \times 4) = 2.65
$

$$
IPC = \frac{1}{CPI} = \frac{1}{2.65} = 0.38
$$

According to the assumption, 60\% of MULT instructions are merged with ADD 
instructions. That results in 0 number of ADD instructions and also 30\% 
($0.6 \times 0.5 = 0.3$) reduce in total number of instructions. So, we update 
the frequencies and cycle counts table accordingly as shown in 
Table~\ref{tbl:newfreq}.

\begin{table}[h]
\center
\begin{tabular}{|c|c|c|c|c|c|c|}
	\hline
	 & \textbf{Load} & \textbf{Store} & \textbf{Branch} & \textbf{ADD} & 
	 \textbf{MULT} & \textbf{FMAD} \\
	\hline
	\textbf{Frequency} & 14\% & 7\% & 7\% & 0\% & 29\% & 43\% \\
	\hline
	\textbf{Cycles} & 2 & 1 & 2 & 1 & 4 & 4 \\
	\hline
\end{tabular}
\caption{(iii) Total power required for every machine.}
\label{tbl:newfreq}
\end{table}

Now, we compute IPC based on new measures in Table~\ref{tbl:newfreq}.

$
CPI = \sum \limits_{i=1}^{6} (Frequency_i \times Cycles_i) = 
(0.14 \times 2) + (0.07 \times 1) + (0.07 \times 2) + (0 \times 1) + 
(0.29 \times 4) + (0.43 \times 4) = 3.37
$

$$
IPC = \frac{1}{CPI} = \frac{1}{3.37} = 0.30
$$

\part{ii} 
$CPUTime = CPI \times IC \times CT$

$CPUTime_{old} = 2.65 \times 1 \times CT$

$CPUTime_{new} = 3.37 \times 0.7 \times CT$

\[
Speedup = \frac{CPUTime_{old}}{CPUTime_{new}} = \frac{2.65 CT}{(3.37 
\times 0.7) CT} = 1.13
\]


\end{document}